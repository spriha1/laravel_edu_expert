!function(e){var t={};function a(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(r,s,function(t){return e[t]}.bind(null,s));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/",a(a.s=12)}({12:function(e,t,a){e.exports=a("VoAW")},VoAW:function(e,t){function a(e,t){switch(t){case"yyyy/mm/dd":e=e.split("/"),e=new Date(e[0],e[1]-1,e[2]);break;case"yyyy.mm.dd":e=e.split("."),e=new Date(e[0],e[1]-1,e[2]);break;case"yyyy-mm-dd":e=e.split("-"),e=new Date(e[0],e[1]-1,e[2]);break;case"dd/mm/yyyy":e=e.split("/"),e=new Date(e[2],e[1]-1,e[0]);break;case"dd-mm-yyyy":e=e.split("-"),e=new Date(e[2],e[1]-1,e[0]);break;case"dd.mm.yyyy":e=e.split("."),e=new Date(e[2],e[1]-1,e[0]);break;default:e=0}return e}function r(e,t){switch(t){case"yyyy/mm/dd":var a=(e=e.split("/"))[0];break;case"yyyy.mm.dd":a=(e=e.split("."))[0];break;case"yyyy-mm-dd":a=(e=e.split("-"))[0];break;case"dd/mm/yyyy":a=(e=e.split("/"))[2];break;case"dd-mm-yyyy":a=(e=e.split("-"))[2];break;case"dd.mm.yyyy":a=(e=e.split("."))[2];break;default:a=0}return a}function s(e){var t=new Date(e),a=new Date(t.getFullYear(),0,1),r=(t-a)/864e5;return Math.ceil((r+a.getDay()+1)/7)}function n(e,t,n,d,c,i){$.post("/post_timesheets",{date:e,user_id:t,date_format:n,user_type:d},function(e){var t=JSON.parse(e);$(".timetable").html("");for(var d=t.original_dates.length,o=0;o<d;o++){var l=(F=new Date(1e3*t.original_dates[o])).getFullYear(),y=F.getMonth()+1,p=F.getDate();switch(p<10&&(p="0"+p),y<10&&(y="0"+y),n){case"yyyy/mm/dd":F=l+"/"+y+"/"+p;break;case"yyyy.mm.dd":F=l+"."+y+"."+p;break;case"yyyy-mm-dd":F=l+"-"+y+"-"+p;break;case"dd/mm/yyyy":F=p+"/"+y+"/"+l;break;case"dd-mm-yyyy":F=p+"-"+y+"-"+l;break;case"dd.mm.yyyy":F=p+"."+y+"."+l;break;default:F=l+"-"+y+"-"+p}$("table thead #"+o).text(F)}var u=t[0],f=u.length,m=0;for(o=0;o<f;o++){var v=$(".editable").clone(!0).css("display","table-row").removeClass("editable");v.attr("task_id",u[o][0].task_id),v.appendTo(".timetable");for(var b=u[o][0].task_id,_=(d=t.dates.length,0);_<d;_++)0!=t.dates[_]&&$("tbody tr[task_id="+b+"] td[dow="+_+"]").attr("date",t.dates[_]);var k=u[o][0].name+" / "+u[o][0].class;$("tbody tr[task_id="+b+"] .task").text(k);d=t[b].length;for(var g=0;g<d;g++)if(0!=t[b][g].length){var h=t[b][g][0].total_time;if(m+=h,0!=h){h-=3600*(w=Math.floor(h/3600));var x=w+":"+(D=Math.floor(h/60))+":"+(h-=60*D)}else x="00:00:00";b=t[b][g][0].task_id;$("tbody tr[task_id="+b+"] td[date="+t[b][g][0].on_date+"]").text(x)}}var j=0;if(0!=m){var w,D;rate_per_second=c/3600,j=parseFloat((m*rate_per_second).toFixed(2)),j=parseFloat((j-i/100*j).toFixed(2)),m-=3600*(w=Math.floor(m/3600));x=w+":"+(D=Math.floor(m/60))+":"+(m-=60*D)}else x="00:00:00";$("#time").text(x),$("#rate").text(c);var O=$("#search").val(),F=$("#date").val(),S=$("#date_format").val();l=parseInt(r(F,S)),s(a(F,S));$.get("/fetch_currency",{user_id:O},function(e){var t=JSON.parse(e),a=t.old,r=t.new;$.post("/convert_currency",{old_cur:a,new_cur:r,amount:j},function(e){$("#amount").text(parseFloat(e).toFixed(2)),$('input[name="amount"]').val(parseFloat(e).toFixed(2))})})})}$(document).ready(function(){var e,t,d,c;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var i=$("#user_id").val(),o=new Date;$(".datepicker").datepicker("setDate",o);o=$("#date").val();var l=$("#date_format").val();$("#search").change(function(){c=$("#tax").val(),$("#invoice").css("display","inline"),e=$("#search").val(),d=$("option:selected").attr("rate"),t=$("option:selected").attr("usertype"),o=$("#date").val(),l=$("#date_format").val();var i=parseInt(r(o,l)),y=s(a(o,l));$("#pay_to").val(e),$.get("/fetch_request_status",{user_id:e,week:y,year:i},function(e){var t=JSON.parse(e);if(t[0]){var a=t[0].name;"Pending"==a?($("#accept").css("display","inline"),$("#reject").css("display","inline")):"Approved"==a?($("#accept").css("display","none"),$("#reject").css("display","inline"),$(".badge").text("Approved")):"Rejected"==a&&($(".badge").text("Rejected"),$("#reject").css("display","none"))}else $(".badge").text(""),$("#accept").css("display","none"),$("#reject").css("display","none")}),n(o,e,l,t,d,c)}),$("#accept").click(function(){e=$("#search").val(),o=$("#date").val(),l=$("#date_format").val();var t=parseInt(r(o,l)),n=s(a(o,l));$.post("/update_request_status",{user_id:e,week:n,status:"Approved",year:t,user:i},function(e){e&&($("#accept").css("display","none"),$("#reject").css("display","inline"),$(".badge").text("Approved"))})}),$("#reject").click(function(){e=$("#search").val(),o=$("#date").val(),l=$("#date_format").val();var t=parseInt(r(o,l)),n=s(a(o,l));$.post("/update_request_status",{user_id:e,week:n,status:"Rejected",year:t,user:i},function(e){e&&($(".badge").text("Rejected"),$("#accept").css("display","none"),$("#reject").css("display","none"))})}),$(".datepicker").datepicker().on("changeDate",function(i){var o=i.format();d=$("option:selected").attr("rate"),c=$("#tax").val(),e=$("#search").val();var l=$("#date_format").val(),y=parseInt(r(o,l)),p=s(a(o,l));$.get("/fetch_request_status",{user_id:e,week:p,year:y},function(e){var t=JSON.parse(e);if(t[0]){var a=t[0].name;"Pending"==a?($("#accept").css("display","inline"),$("#reject").css("display","inline"),$(".badge").text("")):"Approved"==a?($("#accept").css("display","none"),$("#reject").css("display","inline"),$(".badge").text("Approved")):"Rejected"==a&&($(".badge").text("Rejected"),$("#accept").css("display","none"),$("#reject").css("display","none"))}else $(".badge").text(""),$("#accept").css("display","none"),$("#reject").css("display","none")}),$(".timetable").html(""),n(o,e,l,t,d,c)})})}});